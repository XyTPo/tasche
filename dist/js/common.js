window.onscroll=function(){var e=document.querySelector(".fixed-head"),t=document.querySelector(".location");window.pageYOffset>75?(e.classList.add("header-fixed"),t.classList.add("list-padding")):(e.classList.remove("header-fixed"),t.classList.remove("list-padding"))},$(function(){function e(){$(this).toggleClass("active"),$(".level-1").not($(this).next()).slideUp(),$(this).next().slideToggle()}function t(e){return e%1!=0&&(e=e.toFixed(2)),e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}if($(document).mouseup(function(e){var t=$(".sorting-sale"),i=$(".hidden-sale");t.is(e.target)||0!==t.has(e.target).length||(i.slideUp(),t.removeClass("open-sorting"))}),$(document).mouseup(function(e){var t=$(".sorting-sum"),i=$(".hidden-sum");t.is(e.target)||0!==t.has(e.target).length||(i.slideUp(),t.removeClass("open-sorting"))}),$(".filter__name").click(function(e){e.preventDefault,$(this).toggleClass("angle-down"),$(this).next().slideToggle()}),$(".main-category").on("click",e),$(".catalog-list__items").mouseover(function(){$(this).find(".catalog-list__hidden-menu").addClass("active-hidden-menu"),$(this).mouseout(function(){$(".catalog-list__hidden-menu").removeClass("active-hidden-menu")})}),$(".catalog-list__hidden-menu").mouseover(function(){$(this).addClass("active-hidden-menu")}),$(".shop-cart").mouseover(function(){$(".opened-sc").addClass("db")}),$(".shop-cart").mouseout(function(){$(".opened-sc").removeClass("db")}),$(".opened-sc").mouseover(function(){$(".opened-sc").addClass("db")}),$(".opened-sc").mouseout(function(){$(".opened-sc").removeClass("db")}),$(".sorting-sale").click(function(e){e.preventDefault,$(this).toggleClass("open-sorting"),$(".hidden-sale").slideToggle()}),$(".sorting-sum").click(function(e){e.preventDefault,$(this).toggleClass("open-sorting"),$(".hidden-sum").slideToggle()}),$(".region__city").click(function(e){e.preventDefault;var t=$(".city-window");t.hasClass("city-open")?t.removeClass("city-open"):($(this).parent().hasClass("region")?t.removeAttr("style"):t.css("top",$(window).scrollTop()+120),t.addClass("city-open")),$(".overley").toggleClass("overley-open")}),$(".city-window__closed").click(function(e){$(".city-window").toggleClass("city-open"),$(".overley").toggleClass("overley-open"),e.preventDefault()}),$(".custom-checkbox").change(function(){$(this).children(".custom-check").toggleClass("hoba")}),$(".burger-menu-btn").on("click",function(e){e.preventDefault,$(".smart-filter").removeClass("smart-filter-visible-mobile"),$(".catalog-list").toggleClass("catalog-list-visible-mobile"),$("body").addClass("no-scroll")}),$(".catalog-list__title-mobile-close").on("click",function(e){e.preventDefault,$(".catalog-list").toggleClass("catalog-list-visible-mobile"),$("body").removeClass("no-scroll")}),$(".products-filter__trigger").on("click",function(e){e.preventDefault,$(".catalog-list").removeClass("catalog-list-visible-mobile"),$(".smart-filter").toggleClass("smart-filter-visible-mobile"),$("body").toggleClass("no-scroll")}),$(".smart-filter__mobile-close").on("click",function(e){e.preventDefault,$(".smart-filter").removeClass("smart-filter-visible-mobile"),$("body").removeClass("no-scroll")}),$("main").on("click",function(e){var t=!1;if($(".catalog-list-visible-mobile").length){var i=$(".catalog-list"),s="catalog-list-visible-mobile";t=!0}else if($(".smart-filter-visible-mobile").length){var i=$(".smart-filter"),s="smart-filter-visible-mobile";t=!0}t&&!i.is(e.target)&&0===i.has(e.target).length&&(i.removeClass(s),$("body").removeClass("no-scroll"))}),$(".polzunok-5").slider({min:0,max:15e3,values:[1e3,8e3],range:!0,animate:"fast",slide:function(e,t){$(".polzunok-input-5-left").val(t.values[0]),$(".polzunok-input-5-right").val(t.values[1])}}),$(".polzunok-input-5-left").val($(".polzunok-5").slider("values",0)),$(".polzunok-input-5-right").val($(".polzunok-5").slider("values",1)),$(document).focusout(function(){if($(".polzunok-5").length){var e=$(".polzunok-input-5-left").val().replace(/[^0-9]/g,""),t=$(".polzunok-5").slider("option","min"),i=$(".polzunok-5").slider("values",1),s=$(".polzunok-input-5-right").val().replace(/[^0-9]/g,""),l=$(".polzunok-5").slider("option","max"),o=$(".polzunok-5").slider("values",0);e>i&&(e=i),e<t&&(e=t),""==e&&(e=0),s<o&&(s=o),s>l&&(s=l),""==s&&(s=0),$(".polzunok-input-5-left").val(e),$(".polzunok-input-5-right").val(s),$(".polzunok-5").slider("values",[e,s])}}),$(".mobile-phones-icon").click(function(e){e.preventDefault,$(".mobile-phones-hidden").toggleClass("mobile-phones-hidden-active")}),$(document).mouseup(function(e){var t=$(".mobile-phones-hidden");0===t.has(e.target).length&&t.removeClass("mobile-phones-hidden-active")}),$(".products-icons__list").on("click",function(e){e.preventDefault(),$(this).toggleClass("products-icons__list-active")}),$(".products-icons__heart").on("click",function(e){e.preventDefault(),$(this).toggleClass("products-icons__heart-active")}),$(".colors-pic").on("click",function(){$(this).closest(".products-wrap").find(".product-img").removeClass("ch-img").eq($(this).index()).addClass("ch-img"),$(this).closest(".products-wrap").find(".colors-pic").removeClass("colors-pic-active").eq($(this).index()).addClass("colors-pic-active")}),$(".pid__thumbnails-more").click(function(e){$(this).parent().siblings(".pid__thumbnails").addClass("show-all"),e.preventDefault()}),$(".pcs__title-label").click(function(e){var t=$(this).parents(".pcs__title-col"),i=t.index(),s=$(this).parents(".pcs__wrap").find(".pcs__col");t.addClass("active").siblings().removeClass("active"),s.eq(i).addClass("active").siblings().removeClass("active"),e.preventDefault()}),$(".ranking-stars").each(function(){if($(this).hasClass("js-interactive")){var e,t,i=$(this),s=i.find(".ranking-stars__icon");s.hover(function(){e=i.attr("data-rating")||0,t=$(this).index()+1,i.attr("data-rating",""+t).removeClass("clicked")},function(){i.hasClass("clicked")||i.attr("data-rating",e)}),s.click(function(){i.attr("data-rating",""+t).addClass("clicked")})}}),$(".psg__slider").length&&$(".psg__slider").owlCarousel({loop:!0,nav:!0,margin:0,responsiveClass:!0,navText:["",""],responsive:{0:{items:2},1346:{items:3},1451:{items:4}}}),$(".prv__slider").length&&$(".prv__slider").owlCarousel({loop:!0,nav:!0,margin:0,responsiveClass:!0,navText:["",""],responsive:{0:{items:3,nav:!1},768:{items:3},993:{items:4},1346:{items:6},1451:{items:7},1700:{items:8}}}),$(".pid__slider").length){var i=$(".pid__slider");i.owlCarousel({loop:!1,nav:!1,margin:0,navText:["",""],mouseDrag:!1,touchDrag:!0,items:1}),$(".pid__thumbnails-item").click(function(e){var t=$(this).index();$(".pid__slider").trigger("to.owl.carousel",[t,200,!0]),e.preventDefault()})}$(".itmc__inc, .itmc__dec").click(function(){var e=$(this).siblings(".itmc__amount"),t=parseInt(e.text()),i=$(this).parent().data("max-value");$(this).hasClass("itmc__inc")?t<i&&t++:t>1&&t--,e.text(t),$(this).parents(".gcb-table").length&&$(this).parents(".gcb-table").trigger("cart:recount")}),$(".gcb-table").on("cart:recount",function(){var e=0,i=$(this).find(".gcb-item");i.each(function(){var i=parseInt($(this).find(".itmc__amount").text()),s=parseFloat($(this).find(".gcb-item__price-regular .digits").text().replace(/\s+/g,"")),l=s*i;$(this).find(".gcb-item__price-total .digits").text(t(l)),e+=l}),$(this).find(".gcb-total__price-value .digits").text(t(e))}),$(".gobi__radio-item").click(function(e){$(this).hasClass("active")||$(this).addClass("active").siblings().removeClass("active"),e.preventDefault()}),$(".gob-terms__icon").click(function(e){$(this).parent().toggleClass("active"),e.preventDefault()}),$(".gdb-map__type-switch-trigger").click(function(e){if(!$(this).hasClass("active")){var t=$(this).parent(),i=t.index(),s=$(".gdb-map__content-item");t.siblings().find(".gdb-map__type-switch-trigger").removeClass("active"),s.removeClass("active"),$(this).addClass("active"),s.eq(i).addClass("active")}e.preventDefault()}),$(".uoi-paysystem__choice").each(function(){var e=function(e){var t=e[0],i=!1;if(document.createEvent){var s=document.createEvent("MouseEvents");s.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i=t.dispatchEvent(s)}else t.fireEvent&&(i=t.fireEvent("onmousedown"));console.log(t,i)},t=$(this),i=t.find(".uoi-paysystem__trigger"),s=t.find(".uoi-paysystem__select");i.click(function(){t.addClass("active"),e(s)}),s.change(function(){i.html($(this).find("option:selected").text()),t.removeClass("active")})}),$(".pid__order .btn-to-one-click").click(function(e){$(".pid__phone-form-wrap").slideToggle(),e.preventDefault()}),$(".catalog-list__mibile-open-list").click(function(e){console.log("ok"),$(this).parent().toggleClass("mobile-list-visible"),e.preventDefault()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbnNjcm9sbCIsImhlYWRlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImxpc3QiLCJwYWdlWU9mZnNldCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIiQiLCJmX2FjYyIsInRoaXMiLCJ0b2dnbGVDbGFzcyIsIm5vdCIsIm5leHQiLCJzbGlkZVVwIiwic2xpZGVUb2dnbGUiLCJhZGRHYXBUb051bWJlciIsIm51bSIsInRvRml4ZWQiLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJtb3VzZXVwIiwiZSIsInJlIiwicnkiLCJpcyIsInRhcmdldCIsImhhcyIsImxlbmd0aCIsInJlbW92ZUNsYXNzIiwicmkiLCJybyIsImNsaWNrIiwicHJldmVudERlZmF1bHQiLCJvbiIsIm1vdXNlb3ZlciIsImZpbmQiLCJhZGRDbGFzcyIsIm1vdXNlb3V0IiwiY2l0aWVzUG9wdXAiLCJoYXNDbGFzcyIsInBhcmVudCIsInJlbW92ZUF0dHIiLCJjc3MiLCJzY3JvbGxUb3AiLCJjaGFuZ2UiLCJjaGlsZHJlbiIsInNpZGVCYXJWaXNpYmxlIiwiZGl2IiwidGFyZ2V0QWN0aXZlQ2xhc3MiLCJzbGlkZXIiLCJtaW4iLCJtYXgiLCJ2YWx1ZXMiLCJyYW5nZSIsImFuaW1hdGUiLCJzbGlkZSIsImV2ZW50IiwidWkiLCJ2YWwiLCJmb2N1c291dCIsImlucHV0X2xlZnQiLCJvcHRfbGVmdCIsIndoZXJlX3JpZ2h0IiwiaW5wdXRfcmlnaHQiLCJvcHRfcmlnaHQiLCJ3aGVyZV9sZWZ0IiwiY29udGFpbmVyIiwiY2xvc2VzdCIsImVxIiwiaW5kZXgiLCJzaWJsaW5ncyIsInRpdGxlQ29sIiwicGFyZW50cyIsInRpdGxlQ29sSW5kZXgiLCJjb250ZW50Q29sIiwiZWFjaCIsInJTdGFyc0N1cnJlbnQiLCJyU3RhcnNUYXJnZXQiLCJyU3RhcnNQYXJlbnQiLCJyU3RhcnMiLCJob3ZlciIsImF0dHIiLCJvd2xDYXJvdXNlbCIsImxvb3AiLCJuYXYiLCJtYXJnaW4iLCJyZXNwb25zaXZlQ2xhc3MiLCJuYXZUZXh0IiwicmVzcG9uc2l2ZSIsIjAiLCJpdGVtcyIsIjEzNDYiLCIxNDUxIiwiNzY4IiwiOTkzIiwiMTcwMCIsInBpZE93bCIsIm1vdXNlRHJhZyIsInRvdWNoRHJhZyIsInRyaWdnZXIiLCJhbW91bnRCbG9jayIsImFtb3VudCIsInBhcnNlSW50IiwidGV4dCIsIm1heEFtb3VudCIsImRhdGEiLCJjYXJ0VG90YWxQcmljZSIsImNhcnRSb3ciLCJzaW5nbGVQcmljZSIsInBhcnNlRmxvYXQiLCJyb3dUb3RhbFByaWNlIiwicGFyZW50SXRlbSIsImluZCIsIm1hcEJsb2NrQ29udGVudCIsIm9wZW5TZWxlY3QiLCJzZWxlY3RvciIsImVsZW1lbnQiLCJ3b3JrZWQiLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsImZpcmVFdmVudCIsImNvbnNvbGUiLCJsb2ciLCJjaG9pY2VQYXJlbnQiLCJjaG9pY2VUcmlnZ2VyIiwiY2hvaWNlU2VsZWN0IiwiaHRtbCJdLCJtYXBwaW5ncyI6IkFBQ0FBLE9BQU9DLFNBQVcsV0FDZCxHQUFJQyxHQUFTQyxTQUFTQyxjQUFjLGVBQ2hDQyxFQUFPRixTQUFTQyxjQUFjLFlBRS9CSixRQUFPTSxZQUFjLElBQ3BCSixFQUFPSyxVQUFVQyxJQUFJLGdCQUNyQkgsRUFBS0UsVUFBVUMsSUFBSSxrQkFFbkJOLEVBQU9LLFVBQVVFLE9BQU8sZ0JBQ3hCSixFQUFLRSxVQUFVRSxPQUFPLGtCQUs5QkMsRUFBRSxXQWdDRCxRQUFTQyxLQUNSRCxFQUFFRSxNQUFNQyxZQUFZLFVBQ3BCSCxFQUFFLFlBQVlJLElBQUlKLEVBQUVFLE1BQU1HLFFBQVFDLFVBQ2xDTixFQUFFRSxNQUFNRyxPQUFPRSxjQWtUaEIsUUFBU0MsR0FBZUMsR0FJdkIsTUFISUEsR0FBTSxHQUFLLElBQ2RBLEVBQU1BLEVBQUlDLFFBQVEsSUFFWkQsRUFBSUUsV0FBV0MsUUFBUSwwQkFBMkIsT0Fu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TUFDaEd3SCxFQUFTRCxFQUFRSSxjQUFjbkcsT0FDeEIrRixHQUFRSyxZQUNmSixFQUFTRCxFQUFRSyxVQUFVLGVBRS9CQyxTQUFRQyxJQUFJUCxFQUFTQyxJQUVyQk8sRUFBZXJILEVBQUVFLE1BQ2pCb0gsRUFBZ0JELEVBQWF6RixLQUFLLDJCQUNsQzJGLEVBQWVGLEVBQWF6RixLQUFLLHlCQUNyQzBGLEdBQWM5RixNQUFNLFdBQ2hCNkYsRUFBYXhGLFNBQVMsVUFDdEI4RSxFQUFXWSxLQUVmQSxFQUFhbEYsT0FBTyxXQUNoQmlGLEVBQWNFLEtBQUt4SCxFQUFFRSxNQUFNMEIsS0FBSyxtQkFBbUJvRSxRQUNuRHFCLEVBQWFoRyxZQUFZLGNBR2pDckIsRUFBRSxpQ0FBaUN3QixNQUFNLFNBQVNWLEdBQzlDZCxFQUFFLHlCQUF5Qk8sY0FDM0JPLEVBQUVXLG1CQUdUekIsRUFBRSxtQ0FBbUN3QixNQUFNLFNBQVNWLEdBQ25EcUcsUUFBUUMsSUFBSSxNQUNacEgsRUFBRUUsTUFBTStCLFNBQVM5QixZQUFZLHVCQUM3QlcsRUFBRVciLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8g0J/Qu9Cw0LLQsNGO0YnQsNGPINGI0LDQv9C60LAg0Lgg0LHQvtC60L7QstC+0LUg0LzQtdC90Y5cclxud2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24gc2hvd0hlYWRlcigpIHtcclxuICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZml4ZWQtaGVhZCcpO1xyXG4gICAgdmFyIGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9jYXRpb24nKTtcclxuXHJcbiAgICBpZih3aW5kb3cucGFnZVlPZmZzZXQgPiA3NSl7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2hlYWRlci1maXhlZCcpO1xyXG4gICAgICAgIGxpc3QuY2xhc3NMaXN0LmFkZCgnbGlzdC1wYWRkaW5nJyk7XHJcbiAgICB9IGVsc2V7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlci1maXhlZCcpO1xyXG4gICAgICAgIGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnbGlzdC1wYWRkaW5nJyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuJChmdW5jdGlvbigpe1xyXG5cdC8vINCh0LrRgNGL0YLQuNC1INC/0LXRgNCy0L7QuSDRgdC+0YDRgtC40YDQvtCy0LrQuCDQv9C+INC60LvQuNC60YMg0L3QsCDQu9GO0LHRg9GOINC+0LHQu9Cw0YHRgtGMXHJcblx0JChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSl7XHJcblx0XHR2YXIgcmUgPSAkKFwiLnNvcnRpbmctc2FsZVwiKTtcclxuXHRcdHZhciByeSA9ICQoXCIuaGlkZGVuLXNhbGVcIik7XHJcblx0XHRpZiAoIXJlLmlzKGUudGFyZ2V0KVxyXG5cdFx0ICAgICYmIHJlLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJ5LnNsaWRlVXAoKTtcclxuXHRcdFx0cmUucmVtb3ZlQ2xhc3MoXCJvcGVuLXNvcnRpbmdcIik7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0XHJcblx0Ly8g0KHQutGA0YvRgtC40LUg0LLRgtC+0YDQvtC5INGB0L7RgNGC0LjRgNC+0LLQutC4INC/0L4g0LrQu9C40LrRgyDQvdCwINC70Y7QsdGD0Y4g0L7QsdC70LDRgdGC0YxcclxuXHQkKGRvY3VtZW50KS5tb3VzZXVwKGZ1bmN0aW9uIChlKXtcclxuXHRcdHZhciByaSA9ICQoXCIuc29ydGluZy1zdW1cIik7XHJcblx0XHR2YXIgcm8gPSAkKFwiLmhpZGRlbi1zdW1cIik7XHJcblx0XHRpZiAoIXJpLmlzKGUudGFyZ2V0KVxyXG5cdFx0ICAgICYmIHJpLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJvLnNsaWRlVXAoKTtcclxuXHRcdFx0cmkucmVtb3ZlQ2xhc3MoXCJvcGVuLXNvcnRpbmdcIik7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8v0JDQutC60L7RgNC00LjQvtC9INGE0LjQu9GM0YLRgNC+0LJcclxuXHQkKCcuZmlsdGVyX19uYW1lJykuY2xpY2soZnVuY3Rpb24oZSl7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0O1xyXG5cdFx0JCh0aGlzKS50b2dnbGVDbGFzcygnYW5nbGUtZG93bicpO1xyXG5cdFx0JCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoKTtcclxuXHR9KTtcclxuXHJcblx0Ly/QkNC60LrQvtGA0LTQtdC+0L0g0LHQvtC60L7QstC+0LPQviDQvNC10L3RjlxyXG5cdCQoJy5tYWluLWNhdGVnb3J5Jykub24oJ2NsaWNrJywgZl9hY2MpO1xyXG5cdGZ1bmN0aW9uIGZfYWNjKCl7XHJcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuXHRcdCQoJy5sZXZlbC0xJykubm90KCQodGhpcykubmV4dCgpKS5zbGlkZVVwKCk7XHJcblx0XHQkKHRoaXMpLm5leHQoKS5zbGlkZVRvZ2dsZSgpO1xyXG5cdH07XHJcblxyXG5cdC8vINCS0YHQv9C70YvQstCw0Y7RidC40LUg0LzQtdC90Y5cclxuXHQkKCcuY2F0YWxvZy1saXN0X19pdGVtcycpLm1vdXNlb3ZlcihmdW5jdGlvbigpe1xyXG5cdFx0JCh0aGlzKS5maW5kKCcuY2F0YWxvZy1saXN0X19oaWRkZW4tbWVudScpLmFkZENsYXNzKCdhY3RpdmUtaGlkZGVuLW1lbnUnKTtcclxuXHRcdCQodGhpcykubW91c2VvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0JCgnLmNhdGFsb2ctbGlzdF9faGlkZGVuLW1lbnUnKS5yZW1vdmVDbGFzcygnYWN0aXZlLWhpZGRlbi1tZW51Jyk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0JCgnLmNhdGFsb2ctbGlzdF9faGlkZGVuLW1lbnUnKS5tb3VzZW92ZXIoZnVuY3Rpb24oKXtcclxuXHRcdCQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZS1oaWRkZW4tbWVudScpO1xyXG5cdH0pXHJcblxyXG5cdC8vINCf0L7Rj9Cy0LvQtdC90LjQtSDQutC+0YDQt9C40L3Ri1xyXG5cdCQoJy5zaG9wLWNhcnQnKS5tb3VzZW92ZXIoZnVuY3Rpb24oKXtcclxuXHRcdCQoJy5vcGVuZWQtc2MnKS5hZGRDbGFzcygnZGInKTtcclxuXHR9KTtcclxuXHJcblx0JCgnLnNob3AtY2FydCcpLm1vdXNlb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHQkKCcub3BlbmVkLXNjJykucmVtb3ZlQ2xhc3MoJ2RiJyk7XHJcblx0fSk7XHJcblxyXG5cdCQoJy5vcGVuZWQtc2MnKS5tb3VzZW92ZXIoZnVuY3Rpb24oKXtcclxuXHRcdCQoJy5vcGVuZWQtc2MnKS5hZGRDbGFzcygnZGInKTtcclxuXHR9KTtcclxuXHJcblx0JCgnLm9wZW5lZC1zYycpLm1vdXNlb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHQkKCcub3BlbmVkLXNjJykucmVtb3ZlQ2xhc3MoJ2RiJyk7XHJcblx0fSk7XHJcblxyXG5cdCQoJy5zb3J0aW5nLXNhbGUnKS5jbGljayhmdW5jdGlvbihlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQ7XHJcblx0XHQkKHRoaXMpLnRvZ2dsZUNsYXNzKCdvcGVuLXNvcnRpbmcnKTtcclxuXHRcdCQoJy5oaWRkZW4tc2FsZScpLnNsaWRlVG9nZ2xlKCk7XHJcblx0fSk7XHJcblxyXG5cdCQoJy5zb3J0aW5nLXN1bScpLmNsaWNrKGZ1bmN0aW9uKGUpe1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdDtcclxuXHRcdCQodGhpcykudG9nZ2xlQ2xhc3MoJ29wZW4tc29ydGluZycpO1xyXG5cdFx0JCgnLmhpZGRlbi1zdW0nKS5zbGlkZVRvZ2dsZSgpO1xyXG5cdH0pO1xyXG5cclxuXHQkKCcucmVnaW9uX19jaXR5JykuY2xpY2soZnVuY3Rpb24oZSl7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0O1xyXG5cdFx0dmFyIGNpdGllc1BvcHVwID0gJCgnLmNpdHktd2luZG93Jyk7XHJcblx0XHRpZiAoY2l0aWVzUG9wdXAuaGFzQ2xhc3MoJ2NpdHktb3BlbicpKSB7XHJcblx0XHRcdGNpdGllc1BvcHVwLnJlbW92ZUNsYXNzKCdjaXR5LW9wZW4nKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmKCEkKHRoaXMpLnBhcmVudCgpLmhhc0NsYXNzKCdyZWdpb24nKSl7XHJcblx0XHRcdFx0Y2l0aWVzUG9wdXAuY3NzKCd0b3AnLCAkKHdpbmRvdykuc2Nyb2xsVG9wKCkgKyAxMjApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNpdGllc1BvcHVwLnJlbW92ZUF0dHIoXCJzdHlsZVwiKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjaXRpZXNQb3B1cC5hZGRDbGFzcygnY2l0eS1vcGVuJyk7XHJcblx0XHR9XHJcblx0XHQkKCcub3ZlcmxleScpLnRvZ2dsZUNsYXNzKCdvdmVybGV5LW9wZW4nKTtcclxuXHJcblx0fSk7XHJcblxyXG5cdCQoJy5jaXR5LXdpbmRvd19fY2xvc2VkJykuY2xpY2soZnVuY3Rpb24oZSl7XHJcblx0XHQkKCcuY2l0eS13aW5kb3cnKS50b2dnbGVDbGFzcygnY2l0eS1vcGVuJyk7XHJcblx0XHQkKCcub3ZlcmxleScpLnRvZ2dsZUNsYXNzKCdvdmVybGV5LW9wZW4nKTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0fSk7XHJcblxyXG5cdC8vINCU0LXQudGB0YLQstC40Y8g0KfQtdC60LHQvtC60YHQvtCyXHJcblx0JCgnLmN1c3RvbS1jaGVja2JveCcpLmNoYW5nZShmdW5jdGlvbigpe1xyXG5cdFx0JCh0aGlzKS5jaGlsZHJlbignLmN1c3RvbS1jaGVjaycpLnRvZ2dsZUNsYXNzKCdob2JhJyk7XHJcblx0fSk7XHJcblxyXG5cdC8vINCf0L7Rj9Cy0LvQtdC90LjQtSDQuCDQt9Cw0LrRgNGL0YLQuNC1INCx0L7QutC+0LLQvtCz0L4g0LzQtdC90Y5cclxuXHQkKCcuYnVyZ2VyLW1lbnUtYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0O1xyXG5cdFx0JCgnLnNtYXJ0LWZpbHRlcicpLnJlbW92ZUNsYXNzKCdzbWFydC1maWx0ZXItdmlzaWJsZS1tb2JpbGUnKTtcclxuXHRcdCQoJy5jYXRhbG9nLWxpc3QnKS50b2dnbGVDbGFzcygnY2F0YWxvZy1saXN0LXZpc2libGUtbW9iaWxlJyk7XHJcblx0XHQkKCdib2R5JykuYWRkQ2xhc3MoJ25vLXNjcm9sbCcpO1xyXG5cdH0pO1xyXG5cclxuXHQkKCcuY2F0YWxvZy1saXN0X190aXRsZS1tb2JpbGUtY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQ7XHJcblx0XHQkKCcuY2F0YWxvZy1saXN0JykudG9nZ2xlQ2xhc3MoJ2NhdGFsb2ctbGlzdC12aXNpYmxlLW1vYmlsZScpO1xyXG5cdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCduby1zY3JvbGwnKTtcclxuXHR9KTtcclxuXHJcblx0Ly8gaGlkZV9zaG93IGNhdGFsb2cgZmlsdGVyc1xyXG5cdCQoJy5wcm9kdWN0cy1maWx0ZXJfX3RyaWdnZXInKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQ7XHJcblx0XHQkKCcuY2F0YWxvZy1saXN0JykucmVtb3ZlQ2xhc3MoJ2NhdGFsb2ctbGlzdC12aXNpYmxlLW1vYmlsZScpO1xyXG5cdFx0JCgnLnNtYXJ0LWZpbHRlcicpLnRvZ2dsZUNsYXNzKCdzbWFydC1maWx0ZXItdmlzaWJsZS1tb2JpbGUnKTtcclxuXHRcdCQoJ2JvZHknKS50b2dnbGVDbGFzcygnbm8tc2Nyb2xsJyk7XHJcblx0fSk7XHJcblxyXG5cdCQoJy5zbWFydC1maWx0ZXJfX21vYmlsZS1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdDtcclxuXHRcdCQoJy5zbWFydC1maWx0ZXInKS5yZW1vdmVDbGFzcygnc21hcnQtZmlsdGVyLXZpc2libGUtbW9iaWxlJyk7XHJcblx0XHQkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ25vLXNjcm9sbCcpO1xyXG5cdH0pO1xyXG5cclxuXHQkKCdtYWluJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpeyAvLyDRgdC+0LHRi9GC0LjQtSDQutC70LjQutCwINC/0L4g0LLQtdCxLdC00L7QutGD0LzQtdC90YLRg1xyXG4gICAgICAgIHZhciBzaWRlQmFyVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICgkKCcuY2F0YWxvZy1saXN0LXZpc2libGUtbW9iaWxlJykubGVuZ3RoICkge1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gJChcIi5jYXRhbG9nLWxpc3RcIiksXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRBY3RpdmVDbGFzcyA9ICdjYXRhbG9nLWxpc3QtdmlzaWJsZS1tb2JpbGUnO1xyXG4gICAgICAgICAgICBzaWRlQmFyVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkKCcuc21hcnQtZmlsdGVyLXZpc2libGUtbW9iaWxlJykubGVuZ3RoICkge1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gJChcIi5zbWFydC1maWx0ZXJcIiksXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRBY3RpdmVDbGFzcyA9ICdzbWFydC1maWx0ZXItdmlzaWJsZS1tb2JpbGUnO1xyXG4gICAgICAgICAgICBzaWRlQmFyVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cdFx0aWYgKHNpZGVCYXJWaXNpYmxlIFxyXG4gICAgICAgICAgICAmJiAhZGl2LmlzKGUudGFyZ2V0KSAvLyDQtdGB0LvQuCDQutC70LjQuiDQsdGL0Lsg0L3QtSDQv9C+INC90LDRiNC10LzRgyDQsdC70L7QutGDXHJcblx0XHQgICAgJiYgZGl2LmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKSB7IC8vINC4INC90LUg0L/QviDQtdCz0L4g0LTQvtGH0LXRgNC90LjQvCDRjdC70LXQvNC10L3RgtCw0LxcclxuXHRcdFx0ZGl2LnJlbW92ZUNsYXNzKHRhcmdldEFjdGl2ZUNsYXNzKTsgLy8g0YHQutGA0YvQstCw0LXQvCDQtdCz0L5cclxuXHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCduby1zY3JvbGwnKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8g0KHQu9Cw0LnQtNC10YAg0YbQtdC90YtcclxuXHQkKFwiLnBvbHp1bm9rLTVcIikuc2xpZGVyKHtcclxuXHRcdG1pbjogMCxcclxuXHRcdG1heDogMTUwMDAsXHJcblx0XHR2YWx1ZXM6IFsxMDAwLCA4MDAwXSxcclxuXHRcdHJhbmdlOiB0cnVlLFxyXG5cdFx0YW5pbWF0ZTogXCJmYXN0XCIsXHJcblx0XHRzbGlkZSA6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgeyAgICBcclxuXHRcdFx0JChcIi5wb2x6dW5vay1pbnB1dC01LWxlZnRcIikudmFsKHVpLnZhbHVlc1sgMCBdKTsgICBcclxuXHRcdFx0JChcIi5wb2x6dW5vay1pbnB1dC01LXJpZ2h0XCIpLnZhbCh1aS52YWx1ZXNbIDEgXSk7ICBcclxuXHRcdH0gICAgXHJcblx0fSk7XHJcblx0JChcIi5wb2x6dW5vay1pbnB1dC01LWxlZnRcIikudmFsKCQoXCIucG9senVub2stNVwiKS5zbGlkZXIoXCJ2YWx1ZXNcIiwgMCkpO1xyXG5cdCQoXCIucG9senVub2staW5wdXQtNS1yaWdodFwiKS52YWwoJChcIi5wb2x6dW5vay01XCIpLnNsaWRlcihcInZhbHVlc1wiLCAxKSk7XHJcblx0JChkb2N1bWVudCkuZm9jdXNvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoJCgnLnBvbHp1bm9rLTUnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyIGlucHV0X2xlZnQgPSAkKFwiLnBvbHp1bm9rLWlucHV0LTUtbGVmdFwiKS52YWwoKS5yZXBsYWNlKC9bXjAtOV0vZywgJycpLFxyXG4gICAgICAgICAgICAgICAgb3B0X2xlZnQgPSAkKFwiLnBvbHp1bm9rLTVcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwibWluXCIpLFxyXG4gICAgICAgICAgICAgICAgd2hlcmVfcmlnaHQgPSAkKFwiLnBvbHp1bm9rLTVcIikuc2xpZGVyKFwidmFsdWVzXCIsIDEpLFxyXG4gICAgICAgICAgICAgICAgaW5wdXRfcmlnaHQgPSAkKFwiLnBvbHp1bm9rLWlucHV0LTUtcmlnaHRcIikudmFsKCkucmVwbGFjZSgvW14wLTldL2csICcnKSxcclxuICAgICAgICAgICAgICAgIG9wdF9yaWdodCA9ICQoXCIucG9senVub2stNVwiKS5zbGlkZXIoXCJvcHRpb25cIiwgXCJtYXhcIiksXHJcbiAgICAgICAgICAgICAgICB3aGVyZV9sZWZ0ID0gJChcIi5wb2x6dW5vay01XCIpLnNsaWRlcihcInZhbHVlc1wiLCAwKTtcclxuICAgICAgICAgICAgaWYgKGlucHV0X2xlZnQgPiB3aGVyZV9yaWdodCkge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRfbGVmdCA9IHdoZXJlX3JpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnB1dF9sZWZ0IDwgb3B0X2xlZnQpIHtcclxuICAgICAgICAgICAgICAgIGlucHV0X2xlZnQgPSBvcHRfbGVmdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRfbGVmdCA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dF9sZWZ0ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRfcmlnaHQgPCB3aGVyZV9sZWZ0KSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dF9yaWdodCA9IHdoZXJlX2xlZnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlucHV0X3JpZ2h0ID4gb3B0X3JpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dF9yaWdodCA9IG9wdF9yaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5wdXRfcmlnaHQgPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRfcmlnaHQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoXCIucG9senVub2staW5wdXQtNS1sZWZ0XCIpLnZhbChpbnB1dF9sZWZ0KTtcclxuICAgICAgICAgICAgJChcIi5wb2x6dW5vay1pbnB1dC01LXJpZ2h0XCIpLnZhbChpbnB1dF9yaWdodCk7XHJcbiAgICAgICAgICAgICQoXCIucG9senVub2stNVwiKS5zbGlkZXIoIFwidmFsdWVzXCIsIFsgaW5wdXRfbGVmdCwgaW5wdXRfcmlnaHQgXSApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vINCh0L/QuNGB0L7QuiDRgtC10LvQtdGE0L7QvdC+0LIg0L3QsCDQvNC+0LEuINGD0YHRgtGA0L7QudGB0YLQstCw0YVcclxuICAgICQoJy5tb2JpbGUtcGhvbmVzLWljb24nKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0O1xyXG4gICAgICAgICQoJy5tb2JpbGUtcGhvbmVzLWhpZGRlbicpLnRvZ2dsZUNsYXNzKCdtb2JpbGUtcGhvbmVzLWhpZGRlbi1hY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm1vdXNldXAoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgY29udGFpbmVyID0gJChcIi5tb2JpbGUtcGhvbmVzLWhpZGRlblwiKTtcclxuICAgICAgICBpZiAoY29udGFpbmVyLmhhcyhlLnRhcmdldCkubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKCdtb2JpbGUtcGhvbmVzLWhpZGRlbi1hY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQkNC60YLQuNCy0L3QvtGB0YLRjCDQuNC60L7QvdC60Lgg0Log0YHRgNCw0LLQvdC10L3QuNGOXHJcbiAgICAkKCcucHJvZHVjdHMtaWNvbnNfX2xpc3QnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdwcm9kdWN0cy1pY29uc19fbGlzdC1hY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vINCQ0LrRgtC40LLQvdC+0YHRgtGMINC40LrQvtC90LrQuCDQsiDQuNC30LHRgNCw0L3QvdC+0LVcclxuICAgICQoJy5wcm9kdWN0cy1pY29uc19faGVhcnQnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdwcm9kdWN0cy1pY29uc19faGVhcnQtYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyDQodC80LXQvdCwINGE0L7RgtC+0LPRgNCw0YTQuNC4INC4INC/0L7Rj9Cy0LvQtdC90LjQtSDQvtCx0LLQvtC00LrQuCDRgyDRhtCy0LXRgtCwXHJcbiAgICAkKCcuY29sb3JzLXBpYycpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0cy13cmFwJykuZmluZCgnLnByb2R1Y3QtaW1nJykucmVtb3ZlQ2xhc3MoXCJjaC1pbWdcIikuZXEoJCh0aGlzKS5pbmRleCgpKS5hZGRDbGFzcyhcImNoLWltZ1wiKTtcclxuICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5wcm9kdWN0cy13cmFwJykuZmluZCgnLmNvbG9ycy1waWMnKS5yZW1vdmVDbGFzcyhcImNvbG9ycy1waWMtYWN0aXZlXCIpLmVxKCQodGhpcykuaW5kZXgoKSkuYWRkQ2xhc3MoXCJjb2xvcnMtcGljLWFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAkKCcucGlkX190aHVtYm5haWxzLW1vcmUnKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnNpYmxpbmdzKCcucGlkX190aHVtYm5haWxzJykuYWRkQ2xhc3MoJ3Nob3ctYWxsJyk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcucGNzX190aXRsZS1sYWJlbCcpLmNsaWNrKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIHZhciB0aXRsZUNvbCA9ICQodGhpcykucGFyZW50cygnLnBjc19fdGl0bGUtY29sJyk7XHJcbiAgICAgICAgdmFyIHRpdGxlQ29sSW5kZXggPSB0aXRsZUNvbC5pbmRleCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50Q29sID0gJCh0aGlzKS5wYXJlbnRzKCcucGNzX193cmFwJykuZmluZCgnLnBjc19fY29sJyk7XHJcbiAgICAgICAgdGl0bGVDb2wuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIGNvbnRlbnRDb2wuZXEodGl0bGVDb2xJbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLnJhbmtpbmctc3RhcnMnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygnanMtaW50ZXJhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICB2YXIgclN0YXJzUGFyZW50ID0gJCh0aGlzKSwgclN0YXJzID0gIHJTdGFyc1BhcmVudC5maW5kKCcucmFua2luZy1zdGFyc19faWNvbicpLCByU3RhcnNDdXJyZW50LCByU3RhcnNUYXJnZXQ7XHJcbiAgICAgICAgICAgIHJTdGFycy5ob3ZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJTdGFyc0N1cnJlbnQgPSByU3RhcnNQYXJlbnQuYXR0cihcImRhdGEtcmF0aW5nXCIpIHx8IDA7XHJcbiAgICAgICAgICAgICAgICByU3RhcnNUYXJnZXQgPSAkKHRoaXMpLmluZGV4KCkrMTtcclxuICAgICAgICAgICAgICAgIHJTdGFyc1BhcmVudC5hdHRyKFwiZGF0YS1yYXRpbmdcIiwgXCJcIiArIHJTdGFyc1RhcmdldCkucmVtb3ZlQ2xhc3MoXCJjbGlja2VkXCIpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJTdGFyc1BhcmVudC5oYXNDbGFzcyhcImNsaWNrZWRcIikgfHwgclN0YXJzUGFyZW50LmF0dHIoXCJkYXRhLXJhdGluZ1wiLCByU3RhcnNDdXJyZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJTdGFycy5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJTdGFyc1BhcmVudC5hdHRyKFwiZGF0YS1yYXRpbmdcIiwgXCJcIiArIHJTdGFyc1RhcmdldCkuYWRkQ2xhc3MoXCJjbGlja2VkXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmKCQoJy5wc2dfX3NsaWRlcicpLmxlbmd0aCl7XHJcbiAgICAgICAgJCgnLnBzZ19fc2xpZGVyJykub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgICAgICBsb29wOnRydWUsXHJcbiAgICAgICAgICAgIG5hdjp0cnVlLFxyXG4gICAgICAgICAgICBtYXJnaW46MCxcclxuICAgICAgICAgICAgcmVzcG9uc2l2ZUNsYXNzOnRydWUsXHJcbiAgICAgICAgICAgIG5hdlRleHQ6IFsnJywnJ10sXHJcbiAgICAgICAgICAgIHJlc3BvbnNpdmU6e1xyXG4gICAgICAgICAgICAgICAgMDp7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6MlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDEzNDY6e1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOjNcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAxNDUxOntcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczo0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgaWYoJCgnLnBydl9fc2xpZGVyJykubGVuZ3RoKXtcclxuICAgICAgICAkKCcucHJ2X19zbGlkZXInKS5vd2xDYXJvdXNlbCh7XHJcbiAgICAgICAgICAgIGxvb3A6dHJ1ZSxcclxuICAgICAgICAgICAgbmF2OnRydWUsXHJcbiAgICAgICAgICAgIG1hcmdpbjowLFxyXG4gICAgICAgICAgICByZXNwb25zaXZlQ2xhc3M6dHJ1ZSxcclxuICAgICAgICAgICAgbmF2VGV4dDogWycnLCcnXSxcclxuICAgICAgICAgICAgcmVzcG9uc2l2ZTp7XHJcbiAgICAgICAgICAgICAgICAwOntcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczozLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hdjpmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDc2ODp7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6M1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDk5Mzp7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6NFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDEzNDY6e1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOjZcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAxNDUxOntcclxuICAgICAgICAgICAgICAgICAgICBpdGVtczo3XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgMTcwMDp7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6OFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBpZigkKCcucGlkX19zbGlkZXInKS5sZW5ndGgpe1xyXG4gICAgICAgIHZhciBwaWRPd2wgPSAkKCcucGlkX19zbGlkZXInKTtcclxuICAgICAgICBwaWRPd2wub3dsQ2Fyb3VzZWwoe1xyXG4gICAgICAgICAgICBsb29wOmZhbHNlLFxyXG4gICAgICAgICAgICBuYXY6ZmFsc2UsXHJcbiAgICAgICAgICAgIG1hcmdpbjowLFxyXG4gICAgICAgICAgICBuYXZUZXh0OiBbJycsJyddLFxyXG4gICAgICAgICAgICBtb3VzZURyYWc6IGZhbHNlLFxyXG4gICAgICAgICAgICB0b3VjaERyYWc6IHRydWUsXHJcbiAgICAgICAgICAgIGl0ZW1zOjEsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAkKCcucGlkX190aHVtYm5haWxzLWl0ZW0nKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpO1xyXG4gICAgICAgICAgICAkKCcucGlkX19zbGlkZXInKS50cmlnZ2VyKCd0by5vd2wuY2Fyb3VzZWwnLCBbaW5kZXgsIDIwMCwgdHJ1ZV0pO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblx0JCgnLml0bWNfX2luYywgLml0bWNfX2RlYycpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgYW1vdW50QmxvY2sgPSAkKHRoaXMpLnNpYmxpbmdzKCcuaXRtY19fYW1vdW50Jyk7XHJcblx0XHR2YXIgYW1vdW50ID0gcGFyc2VJbnQoYW1vdW50QmxvY2sudGV4dCgpKTtcclxuXHRcdHZhciBtYXhBbW91bnQgPSAkKHRoaXMpLnBhcmVudCgpLmRhdGEoJ21heC12YWx1ZScpO1xyXG5cdFx0aWYoJCh0aGlzKS5oYXNDbGFzcygnaXRtY19faW5jJykpe1xyXG5cdFx0XHRpZiAoYW1vdW50IDwgbWF4QW1vdW50KSBhbW91bnQrKztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmIChhbW91bnQgPiAxKSBhbW91bnQtLTtcclxuXHRcdH1cclxuXHRcdGFtb3VudEJsb2NrLnRleHQoYW1vdW50KTtcclxuXHRcdGlmKCQodGhpcykucGFyZW50cygnLmdjYi10YWJsZScpLmxlbmd0aCkge1xyXG5cdFx0XHQkKHRoaXMpLnBhcmVudHMoJy5nY2ItdGFibGUnKS50cmlnZ2VyKCdjYXJ0OnJlY291bnQnKVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdGZ1bmN0aW9uIGFkZEdhcFRvTnVtYmVyKG51bSl7XHRcdFxyXG5cdFx0aWYgKG51bSAlIDEgIT0gMCkge1xyXG5cdFx0XHRudW0gPSBudW0udG9GaXhlZCgyKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBudW0udG9TdHJpbmcoKS5yZXBsYWNlKC8oXFxkKSg/PShcXGR7M30pKyg/IVxcZCkpL2csICckMSAnKVxyXG5cdH1cclxuXHQkKCcuZ2NiLXRhYmxlJykub24oJ2NhcnQ6cmVjb3VudCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBjYXJ0VG90YWxQcmljZSA9IDA7XHJcblx0XHR2YXIgY2FydFJvdyA9ICQodGhpcykuZmluZCgnLmdjYi1pdGVtJyk7XHJcblx0XHRjYXJ0Um93LmVhY2goZnVuY3Rpb24oKXtcclxuXHRcdFx0dmFyIGFtb3VudCA9IHBhcnNlSW50KCQodGhpcykuZmluZCgnLml0bWNfX2Ftb3VudCcpLnRleHQoKSk7XHJcblx0XHRcdHZhciBzaW5nbGVQcmljZSA9IHBhcnNlRmxvYXQoJCh0aGlzKS5maW5kKCcuZ2NiLWl0ZW1fX3ByaWNlLXJlZ3VsYXIgLmRpZ2l0cycpLnRleHQoKS5yZXBsYWNlKC9cXHMrL2csJycpKTtcclxuXHRcdFx0dmFyIHJvd1RvdGFsUHJpY2UgPSBzaW5nbGVQcmljZSAqIGFtb3VudDtcclxuXHRcdFx0JCh0aGlzKS5maW5kKCcuZ2NiLWl0ZW1fX3ByaWNlLXRvdGFsIC5kaWdpdHMnKS50ZXh0KGFkZEdhcFRvTnVtYmVyKHJvd1RvdGFsUHJpY2UpKTtcclxuXHRcdFx0Y2FydFRvdGFsUHJpY2UgKz0gcm93VG90YWxQcmljZTtcclxuXHRcdH0pO1xyXG5cdFx0JCh0aGlzKS5maW5kKCcuZ2NiLXRvdGFsX19wcmljZS12YWx1ZSAuZGlnaXRzJykudGV4dChhZGRHYXBUb051bWJlcihjYXJ0VG90YWxQcmljZSkpO1xyXG5cdH0pO1xyXG4gICAgJCgnLmdvYmlfX3JhZGlvLWl0ZW0nKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgIFx0aWYoISQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICBcdFx0JCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHR9XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICAkKCcuZ29iLXRlcm1zX19pY29uJykuY2xpY2soZnVuY3Rpb24oZSl7XHJcbiAgICBcdCQodGhpcykucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLmdkYi1tYXBfX3R5cGUtc3dpdGNoLXRyaWdnZXInKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgICBpZighJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgdmFyIHBhcmVudEl0ZW0gPSAkKHRoaXMpLnBhcmVudCgpO1xyXG4gICAgICAgICAgICB2YXIgaW5kID0gcGFyZW50SXRlbS5pbmRleCgpO1xyXG4gICAgICAgICAgICB2YXIgbWFwQmxvY2tDb250ZW50ID0gJCgnLmdkYi1tYXBfX2NvbnRlbnQtaXRlbScpO1xyXG4gICAgICAgICAgICBwYXJlbnRJdGVtLnNpYmxpbmdzKCkuZmluZCgnLmdkYi1tYXBfX3R5cGUtc3dpdGNoLXRyaWdnZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIG1hcEJsb2NrQ29udGVudC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBtYXBCbG9ja0NvbnRlbnQuZXEoaW5kKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnLnVvaS1wYXlzeXN0ZW1fX2Nob2ljZScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgb3BlblNlbGVjdCA9IGZ1bmN0aW9uKHNlbGVjdG9yKXtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBzZWxlY3RvclswXSwgd29ya2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkgeyAvLyBhbGwgYnJvd3NlcnNcclxuICAgICAgICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcclxuICAgICAgICAgICAgICAgIGUuaW5pdE1vdXNlRXZlbnQoXCJtb3VzZWRvd25cIiwgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMCwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICB3b3JrZWQgPSBlbGVtZW50LmRpc3BhdGNoRXZlbnQoZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5maXJlRXZlbnQpIHsgLy8gaWVcclxuICAgICAgICAgICAgICAgIHdvcmtlZCA9IGVsZW1lbnQuZmlyZUV2ZW50KFwib25tb3VzZWRvd25cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coZWxlbWVudCwgd29ya2VkKVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY2hvaWNlUGFyZW50ID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgY2hvaWNlVHJpZ2dlciA9IGNob2ljZVBhcmVudC5maW5kKCcudW9pLXBheXN5c3RlbV9fdHJpZ2dlcicpLFxyXG4gICAgICAgICAgICBjaG9pY2VTZWxlY3QgPSBjaG9pY2VQYXJlbnQuZmluZCgnLnVvaS1wYXlzeXN0ZW1fX3NlbGVjdCcpO1xyXG4gICAgICAgIGNob2ljZVRyaWdnZXIuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY2hvaWNlUGFyZW50LmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgb3BlblNlbGVjdChjaG9pY2VTZWxlY3QpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNob2ljZVNlbGVjdC5jaGFuZ2UoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY2hvaWNlVHJpZ2dlci5odG1sKCQodGhpcykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudGV4dCgpKTtcclxuICAgICAgICAgICAgY2hvaWNlUGFyZW50LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgJCgnLnBpZF9fb3JkZXIgLmJ0bi10by1vbmUtY2xpY2snKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgICAkKCcucGlkX19waG9uZS1mb3JtLXdyYXAnKS5zbGlkZVRvZ2dsZSgpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgfSk7XHJcblxyXG5cdCQoJy5jYXRhbG9nLWxpc3RfX21pYmlsZS1vcGVuLWxpc3QnKS5jbGljayhmdW5jdGlvbihlKXtcclxuXHRcdGNvbnNvbGUubG9nKCdvaycpXHJcblx0XHQkKHRoaXMpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdtb2JpbGUtbGlzdC12aXNpYmxlJyk7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0fSk7XHJcblxyXG59KTsiXX0=
